* C:\Users\E\Documents\LTspiceXVII\ECEN 2270\Lab4\Wave_rect.asc
V1 Vcc 0 5
C1 Vcc 0 47µ
C2 Vcc 0 0.1µ
XU1 0 Vsaw Vout Vcc N002 Vsaw Vsaw Vcc NE555
C3 N002 0 0.1µ
C4 Vsaw 0 100n
XU2 N001 Vsaw Vcc 0 V_PWM level.2 Avol=1Meg GBW=2Meg Slew=10Meg ilimit=20m rail=0.2 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
V2 N001 0 SINE(2.4 0.7 10)
C5 V_sin 0 10µ
R1 V_sin V_PWM 3.5k
XX1 Vsaw currentsource

* block symbol definitions
.subckt currentsource Source
R1 N004 Source 210k
R2 N003 0 10k
R3 N001 N003 39k
V1 N001 0 5
V2 N002 0 10
Q1 N004 N003 N002 0 2N2907
.ends currentsource

.model NPN NPN
.model PNP PNP
.lib C:\Users\E\Documents\LTspiceXVII\lib\cmp\standard.bjt
.tran 0 500mm 5m uic
.lib NE555.sub
.lib UniversalOpamps2.sub
.backanno
.end
